"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MainUtil = void 0;
class MainUtil {
    manager;
    constructor(manager) {
        this.manager = manager;
    }
    send(id, transportable) {
        const cluster = this.manager.clusters.get(id);
        if (!cluster)
            return Promise.reject(new Error('Invalid cluster id provided'));
        return cluster.ipc.send(transportable);
    }
    async broadcast(transportable) {
        const results = await Promise.all([...this.manager.clusters.values()].map(cluster => cluster.ipc.send(transportable)));
        if (!transportable.repliable)
            return;
        return results.filter(result => result !== undefined);
    }
}
exports.MainUtil = MainUtil;
//# sourceMappingURL=MainUtil.js.map